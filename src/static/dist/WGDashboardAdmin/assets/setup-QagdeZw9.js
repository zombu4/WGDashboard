import{_ as m,c as n,a as e,b as o,j as c,e as p,d as h,t as f,q as i,A as d,B as w,i as g,h as b,D as _,f as l}from"./index-BxUmuwM2.js";import{L as x}from"./localeText-DE_4BrO4.js";const v={name:"setup",components:{LocaleText:x},setup(){return{store:_()}},data(){return{setup:{username:"",newPassword:"",repeatNewPassword:"",enable_totp:!0},loading:!1,errorMessage:"",done:!1}},computed:{resolvedTheme(){return b(this.store.Configuration.Server.dashboard_theme)},goodToSubmit(){return this.setup.username&&this.setup.newPassword.length>=8&&this.setup.repeatNewPassword.length>=8&&this.setup.newPassword===this.setup.repeatNewPassword}},mounted(){g()},methods:{submit(){this.loading=!0,w("/api/Welcome_Finish",this.setup,r=>{r.status?(this.done=!0,this.$router.push("/2FASetup")):(document.querySelectorAll("#createAccount input").forEach(s=>s.classList.add("is-invalid")),this.errorMessage=r.message,document.querySelector(".login-container-fluid").scrollTo({top:0,left:0,behavior:"smooth"})),this.loading=!1})}}},y=["data-bs-theme"],P={class:"m-auto text-body",style:{width:"500px"}},T={class:"dashboardLogo display-4"},N={class:"mb-5"},S={key:0,class:"alert alert-danger"},k={class:"d-flex flex-column gap-3"},C={id:"createAccount",class:"d-flex flex-column gap-2"},L={class:"form-group text-body"},V={for:"username",class:"mb-1 text-muted"},q={class:"form-group text-body"},A={for:"password",class:"mb-1 text-muted"},B={class:"form-group text-body"},M={for:"confirmPassword",class:"mb-1 text-muted"},$=["disabled"],D={key:0,class:"d-flex align-items-center w-100"},E={key:1,class:"d-flex align-items-center w-100"};function U(r,s,F,W,j,u){const t=c("LocaleText");return l(),n("div",{class:"container-fluid login-container-fluid d-flex main pt-5 overflow-scroll","data-bs-theme":u.resolvedTheme},[e("div",P,[e("span",T,[o(t,{t:"Nice to meet you!"})]),e("p",N,[o(t,{t:"Please fill in the following fields to finish setup"}),s[4]||(s[4]=p(" ðŸ˜Š",-1))]),e("div",null,[e("h3",null,[o(t,{t:"Create an account"})]),this.errorMessage?(l(),n("div",S,f(this.errorMessage),1)):h("",!0),e("div",k,[e("form",C,[e("div",L,[e("label",V,[e("small",null,[o(t,{t:"Enter an username you like"})])]),i(e("input",{type:"text",autocomplete:"username","onUpdate:modelValue":s[0]||(s[0]=a=>this.setup.username=a),class:"form-control",id:"username",name:"username",required:""},null,512),[[d,this.setup.username]])]),e("div",q,[e("label",A,[e("small",null,[o(t,{t:"Enter a password"}),e("code",null,[o(t,{t:"(At least 8 characters and make sure is strong enough!)"})])])]),i(e("input",{type:"password",autocomplete:"new-password","onUpdate:modelValue":s[1]||(s[1]=a=>this.setup.newPassword=a),class:"form-control",id:"password",name:"password",required:""},null,512),[[d,this.setup.newPassword]])]),e("div",B,[e("label",M,[e("small",null,[o(t,{t:"Confirm password"})])]),i(e("input",{type:"password",autocomplete:"confirm-new-password","onUpdate:modelValue":s[2]||(s[2]=a=>this.setup.repeatNewPassword=a),class:"form-control",id:"confirmPassword",name:"confirmPassword",required:""},null,512),[[d,this.setup.repeatNewPassword]])])]),e("button",{class:"btn btn-dark btn-lg mb-5 d-flex btn-brand shadow align-items-center",ref:"signInBtn",disabled:!this.goodToSubmit||this.loading||this.done,onClick:s[3]||(s[3]=a=>this.submit())},[!this.loading&&!this.done?(l(),n("span",D,[o(t,{t:"Next"}),s[5]||(s[5]=e("i",{class:"bi bi-chevron-right ms-auto"},null,-1))])):(l(),n("span",E,[o(t,{t:"Saving..."}),s[6]||(s[6]=e("span",{class:"spinner-border ms-auto spinner-border-sm",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1))]))],8,$)])])])],8,y)}const G=m(v,[["render",U]]);export{G as default};
