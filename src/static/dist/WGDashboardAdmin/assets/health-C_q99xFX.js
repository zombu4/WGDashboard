import{r as b,o as f,z as x,c as d,a as t,b as s,n as v,t as n,F as y,k as w,g as k,f as o}from"./index-Dml9qu0A.js";import{L as e}from"./localeText-DLTevZCc.js";const j={class:"text-body row g-3"},L={class:"col-12"},B={class:"mb-3"},S={class:"col-lg-6"},T={class:"card rounded-3 shadow h-100"},C={class:"card-header bg-transparent"},G={class:"card-body"},D={key:0,class:"table table-sm align-middle mb-0"},N={key:1,class:"text-muted"},q={class:"col-lg-6"},H={class:"card rounded-3 shadow h-100"},P={class:"card-header bg-transparent"},A={key:0,class:"card-body"},E={class:"d-flex justify-content-between mb-2"},F={class:"text-muted"},M={class:"d-flex justify-content-between mb-3"},R={class:"text-muted"},W={class:"table table-sm mb-0"},I={class:"text-muted"},z={key:1,class:"card-body text-muted"},Q={class:"col-lg-6"},U={class:"card rounded-3 shadow h-100"},V={class:"card-header bg-transparent"},$={class:"card-body"},K={key:0,class:"list-group list-group-flush"},J={class:"list-group-item d-flex justify-content-between"},O={class:"text-muted"},X={class:"list-group-item d-flex justify-content-between"},Y={class:"text-muted"},Z={class:"list-group-item d-flex justify-content-between"},tt={class:"text-muted"},st={class:"list-group-item d-flex justify-content-between"},et={class:"text-muted"},lt={class:"list-group-item d-flex justify-content-between"},nt={class:"text-muted"},at={key:1,class:"text-muted"},dt={class:"col-lg-6"},ot={class:"card rounded-3 shadow h-100"},it={class:"card-header bg-transparent"},rt={key:0,class:"card-body"},ut={class:"list-group list-group-flush"},ct={class:"list-group-item d-flex justify-content-between"},_t={class:"text-muted"},pt={class:"list-group-item d-flex justify-content-between"},ht={class:"text-muted"},vt={class:"list-group-item d-flex justify-content-between"},mt={class:"text-muted"},gt={class:"list-group-item d-flex justify-content-between"},bt={class:"text-muted"},ft={key:1,class:"card-body text-muted"},xt={class:"col-lg-6"},yt={class:"card rounded-3 shadow h-100"},wt={class:"card-header bg-transparent"},kt={class:"card-body"},jt={key:0,class:"list-group list-group-flush"},Lt={class:"list-group-item d-flex justify-content-between"},Bt={class:"text-muted"},St={class:"list-group-item d-flex justify-content-between"},Tt={class:"text-muted"},Ct={class:"list-group-item d-flex justify-content-between"},Gt={class:"text-muted"},Dt={key:1,class:"text-muted"},Nt={class:"col-lg-6"},qt={class:"card rounded-3 shadow h-100"},Ht={class:"card-header bg-transparent"},Pt={key:0,class:"card-body"},At={class:"list-group list-group-flush"},Et={class:"list-group-item d-flex justify-content-between"},Ft={class:"text-muted"},Mt={class:"list-group-item d-flex justify-content-between"},Rt={class:"text-muted"},Wt={class:"list-group-item d-flex justify-content-between"},It={class:"text-muted"},zt={class:"list-group-item d-flex justify-content-between"},Qt={class:"text-muted"},Ut={key:1,class:"card-body text-muted"},Vt={class:"col-lg-6"},$t={class:"card rounded-3 shadow h-100"},Kt={class:"card-header bg-transparent"},Jt={class:"card-body"},Ot={key:0,class:"list-group list-group-flush"},Xt={class:"list-group-item d-flex justify-content-between"},Yt={class:"text-muted"},Zt={class:"list-group-item d-flex justify-content-between"},ts={class:"text-muted"},ss={class:"list-group-item d-flex justify-content-between"},es={class:"text-muted"},ls={class:"list-group-item d-flex justify-content-between"},ns={class:"text-muted"},as={key:1,class:"text-muted"},rs={__name:"health",setup(ds){const l=b(null),r=b(!1);let m=null;const g=()=>{k("/api/healthStatus",{},i=>{l.value=i.data,r.value=!0})};f(()=>{g(),m=setInterval(()=>{g()},15e3)}),x(()=>{clearInterval(m)});const _=i=>{if(i==null)return"-";const a=["B","KB","MB","GB","TB"];let u=i,h=0;for(;u>=1024&&h<a.length-1;)u/=1024,h+=1;return`${u.toFixed(2)} ${a[h]}`},c=i=>i==null?"-":i.toLocaleString(),p=i=>i?.active?"text-bg-success":"text-bg-danger";return(i,a)=>(o(),d("div",j,[t("div",L,[t("h3",B,[a[0]||(a[0]=t("i",{class:"bi bi-heart-pulse-fill me-2"},null,-1)),s(e,{t:"Health"})])]),t("div",S,[t("div",T,[t("div",C,[s(e,{t:"Services"})]),t("div",G,[r.value?(o(),d("table",D,[t("thead",null,[t("tr",null,[t("th",null,[s(e,{t:"Service"})]),t("th",null,[s(e,{t:"Status"})]),t("th",null,[s(e,{t:"Enabled"})])])]),t("tbody",null,[t("tr",null,[a[1]||(a[1]=t("td",null,"WGDashboard",-1)),t("td",null,[t("span",{class:v(["badge",p(l.value?.services?.wg_dashboard)])},n(l.value?.services?.wg_dashboard?.status||"-"),3)]),t("td",null,n(l.value?.services?.wg_dashboard?.enabled_state||"-"),1)]),t("tr",null,[a[2]||(a[2]=t("td",null,"WireGuard (wg0)",-1)),t("td",null,[t("span",{class:v(["badge",p(l.value?.services?.wireguard)])},n(l.value?.services?.wireguard?.status||"-"),3)]),t("td",null,n(l.value?.services?.wireguard?.enabled_state||"-"),1)]),t("tr",null,[a[3]||(a[3]=t("td",null,"AdGuard Home",-1)),t("td",null,[t("span",{class:v(["badge",p(l.value?.services?.adguard)])},n(l.value?.services?.adguard?.status||"-"),3)]),t("td",null,n(l.value?.services?.adguard?.enabled_state||"-"),1)])])])):(o(),d("div",N,[a[4]||(a[4]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])]),t("div",q,[t("div",H,[t("div",P,[s(e,{t:"WireGuard"})]),r.value?(o(),d("div",A,[t("div",E,[t("span",null,[s(e,{t:"Total"})]),t("span",F,n(c(l.value?.wireguard?.total_peers)),1)]),t("div",M,[t("span",null,[s(e,{t:"Connected"})]),t("span",R,n(c(l.value?.wireguard?.connected_peers)),1)]),t("table",W,[t("thead",null,[t("tr",null,[t("th",null,[s(e,{t:"Configuration"})]),t("th",null,[s(e,{t:"Total"})]),t("th",null,[s(e,{t:"Connected"})])])]),t("tbody",null,[(o(!0),d(y,null,w(l.value?.wireguard?.configs,u=>(o(),d("tr",{key:u.name},[t("td",I,n(u.name),1),t("td",null,n(c(u.total_peers)),1),t("td",null,n(c(u.connected_peers)),1)]))),128))])])])):(o(),d("div",z,[a[5]||(a[5]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])]),t("div",Q,[t("div",U,[t("div",V,[s(e,{t:"AdGuard Home"})]),t("div",$,[r.value?(o(),d("ul",K,[t("li",J,[t("span",null,[s(e,{t:"DNS Bind"})]),t("span",O,n(l.value?.adguard?.dns_bind_hosts?.join(", ")||"-"),1)]),t("li",X,[t("span",null,[s(e,{t:"DNS Port"})]),t("span",Y,n(l.value?.adguard?.dns_port||"-"),1)]),t("li",Z,[t("span",null,[s(e,{t:"HTTP Address"})]),t("span",tt,n(l.value?.adguard?.http_address||"-"),1)]),t("li",st,[t("span",null,[s(e,{t:"TLS Server Name"})]),t("span",et,n(l.value?.adguard?.tls_server_name||"-"),1)]),t("li",lt,[t("span",null,[s(e,{t:"HTTPS Port"})]),t("span",nt,n(l.value?.adguard?.tls_port_https||"-"),1)])])):(o(),d("div",at,[a[6]||(a[6]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])]),t("div",dt,[t("div",ot,[t("div",it,[s(e,{t:"AdGuard Query Stats"})]),r.value?(o(),d("div",rt,[t("ul",ut,[t("li",ct,[t("span",null,[s(e,{t:"Window (minutes)"})]),t("span",_t,n(l.value?.adguard_query_stats?.window_minutes),1)]),t("li",pt,[t("span",null,[s(e,{t:"Total Queries"})]),t("span",ht,n(c(l.value?.adguard_query_stats?.total)),1)]),t("li",vt,[t("span",null,[s(e,{t:"Blocked"})]),t("span",mt,n(c(l.value?.adguard_query_stats?.blocked))+" ("+n(l.value?.adguard_query_stats?.blocked_percent)+"%)",1)]),t("li",gt,[t("span",null,[s(e,{t:"Last Entry"})]),t("span",bt,n(l.value?.adguard_query_stats?.last_entry||"-"),1)])])])):(o(),d("div",ft,[a[7]||(a[7]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])]),t("div",xt,[t("div",yt,[t("div",wt,[s(e,{t:"Certificate"})]),t("div",kt,[r.value?(o(),d("ul",jt,[t("li",Lt,[t("span",null,[s(e,{t:"Path"})]),t("span",Bt,n(l.value?.certificate?.path||"-"),1)]),t("li",St,[t("span",null,[s(e,{t:"Expires"})]),t("span",Tt,n(l.value?.certificate?.not_after||l.value?.certificate?.status||"-"),1)]),t("li",Ct,[t("span",null,[s(e,{t:"Days Remaining"})]),t("span",Gt,n(l.value?.certificate?.days_remaining??"-"),1)])])):(o(),d("div",Dt,[a[8]||(a[8]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])]),t("div",Nt,[t("div",qt,[t("div",Ht,[s(e,{t:"Certificate Renewal"})]),r.value?(o(),d("div",Pt,[t("ul",At,[t("li",Et,[t("span",null,[s(e,{t:"Method"})]),t("span",Ft,n(l.value?.certificate_renewal?.method||"-"),1)]),t("li",Mt,[t("span",null,[s(e,{t:"Timer"})]),t("span",Rt,n(l.value?.certificate_renewal?.timer_unit||"-"),1)]),t("li",Wt,[t("span",null,[s(e,{t:"Next Run"})]),t("span",It,n(l.value?.certificate_renewal?.next_run||"-"),1)]),t("li",zt,[t("span",null,[s(e,{t:"Last Run"})]),t("span",Qt,n(l.value?.certificate_renewal?.last_run||"-"),1)])])])):(o(),d("div",Ut,[a[9]||(a[9]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])]),t("div",Vt,[t("div",$t,[t("div",Kt,[s(e,{t:"Disk"})]),t("div",Jt,[r.value?(o(),d("ul",Ot,[t("li",Xt,[t("span",null,[s(e,{t:"Mount"})]),t("span",Yt,n(l.value?.disk?.mount||"/"),1)]),t("li",Zt,[t("span",null,[s(e,{t:"Used"})]),t("span",ts,n(_(l.value?.disk?.used))+" ("+n(l.value?.disk?.percent)+"%)",1)]),t("li",ss,[t("span",null,[s(e,{t:"Free"})]),t("span",es,n(_(l.value?.disk?.free)),1)]),t("li",ls,[t("span",null,[s(e,{t:"Total"})]),t("span",ns,n(_(l.value?.disk?.total)),1)])])):(o(),d("div",as,[a[10]||(a[10]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])])]))}};export{rs as default};
