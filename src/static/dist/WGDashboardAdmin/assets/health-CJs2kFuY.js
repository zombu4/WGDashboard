import{r as b,o as f,z as y,c as d,a as t,b as s,n as v,t as a,F as x,k as w,d as k,g as j,f as o}from"./index-0VWcUCvJ.js";import{L as e}from"./localeText-B67VTq1q.js";const L={class:"text-body row g-3"},B={class:"col-12"},S={class:"mb-3"},T={class:"col-lg-6"},q={class:"card rounded-3 shadow h-100"},C={class:"card-header bg-transparent"},G={class:"card-body"},N={key:0,class:"table table-sm align-middle mb-0"},D={key:1,class:"text-muted"},H={class:"col-lg-6"},P={class:"card rounded-3 shadow h-100"},A={class:"card-header bg-transparent"},E={key:0,class:"card-body"},F={class:"d-flex justify-content-between mb-2"},M={class:"text-muted"},R={class:"d-flex justify-content-between mb-3"},W={class:"text-muted"},I={class:"table table-sm mb-0"},V={class:"text-muted"},z={key:1,class:"card-body text-muted"},Q={class:"col-lg-6"},U={class:"card rounded-3 shadow h-100"},$={class:"card-header bg-transparent"},K={class:"card-body"},J={key:0,class:"list-group list-group-flush"},O={class:"list-group-item d-flex justify-content-between"},X={class:"text-muted"},Y={class:"list-group-item d-flex justify-content-between"},Z={class:"text-muted"},tt={class:"list-group-item d-flex justify-content-between"},st={class:"text-muted"},et={class:"list-group-item d-flex justify-content-between"},lt={class:"text-muted"},at={class:"list-group-item d-flex justify-content-between"},nt={class:"text-muted"},dt={key:1,class:"text-muted"},ot={class:"col-lg-6"},it={class:"card rounded-3 shadow h-100"},ut={class:"card-header bg-transparent"},rt={key:0,class:"card-body"},ct={class:"list-group list-group-flush"},_t={class:"list-group-item d-flex justify-content-between"},pt={class:"text-muted"},ht={class:"list-group-item d-flex justify-content-between"},vt={class:"text-muted"},mt={class:"list-group-item d-flex justify-content-between"},gt={class:"text-muted"},bt={class:"list-group-item d-flex justify-content-between"},ft={class:"text-muted"},yt={key:0,class:"text-muted mt-2"},xt={key:1,class:"card-body text-muted"},wt={class:"col-lg-6"},kt={class:"card rounded-3 shadow h-100"},jt={class:"card-header bg-transparent"},Lt={class:"card-body"},Bt={key:0,class:"list-group list-group-flush"},St={class:"list-group-item d-flex justify-content-between"},Tt={class:"text-muted"},qt={class:"list-group-item d-flex justify-content-between"},Ct={class:"text-muted"},Gt={class:"list-group-item d-flex justify-content-between"},Nt={class:"text-muted"},Dt={key:1,class:"text-muted"},Ht={class:"col-lg-6"},Pt={class:"card rounded-3 shadow h-100"},At={class:"card-header bg-transparent"},Et={key:0,class:"card-body"},Ft={class:"list-group list-group-flush"},Mt={class:"list-group-item d-flex justify-content-between"},Rt={class:"text-muted"},Wt={class:"list-group-item d-flex justify-content-between"},It={class:"text-muted"},Vt={class:"list-group-item d-flex justify-content-between"},zt={class:"text-muted"},Qt={class:"list-group-item d-flex justify-content-between"},Ut={class:"text-muted"},$t={key:1,class:"card-body text-muted"},Kt={class:"col-lg-6"},Jt={class:"card rounded-3 shadow h-100"},Ot={class:"card-header bg-transparent"},Xt={class:"card-body"},Yt={key:0,class:"list-group list-group-flush"},Zt={class:"list-group-item d-flex justify-content-between"},ts={class:"text-muted"},ss={class:"list-group-item d-flex justify-content-between"},es={class:"text-muted"},ls={class:"list-group-item d-flex justify-content-between"},as={class:"text-muted"},ns={class:"list-group-item d-flex justify-content-between"},ds={class:"text-muted"},os={key:1,class:"text-muted"},cs={__name:"health",setup(is){const l=b(null),u=b(!1);let m=null;const g=()=>{j("/api/healthStatus",{},i=>{l.value=i.data,u.value=!0})};f(()=>{g(),m=setInterval(()=>{g()},15e3)}),y(()=>{clearInterval(m)});const _=i=>{if(i==null)return"-";const n=["B","KB","MB","GB","TB"];let r=i,h=0;for(;r>=1024&&h<n.length-1;)r/=1024,h+=1;return`${r.toFixed(2)} ${n[h]}`},c=i=>i==null?"-":i.toLocaleString(),p=i=>i?.active?"text-bg-success":"text-bg-danger";return(i,n)=>(o(),d("div",L,[t("div",B,[t("h3",S,[n[0]||(n[0]=t("i",{class:"bi bi-heart-pulse-fill me-2"},null,-1)),s(e,{t:"Health"})])]),t("div",T,[t("div",q,[t("div",C,[s(e,{t:"Services"})]),t("div",G,[u.value?(o(),d("table",N,[t("thead",null,[t("tr",null,[t("th",null,[s(e,{t:"Service"})]),t("th",null,[s(e,{t:"Status"})]),t("th",null,[s(e,{t:"Enabled"})])])]),t("tbody",null,[t("tr",null,[n[1]||(n[1]=t("td",null,"WGDashboard",-1)),t("td",null,[t("span",{class:v(["badge",p(l.value?.services?.wg_dashboard)])},a(l.value?.services?.wg_dashboard?.status||"-"),3)]),t("td",null,a(l.value?.services?.wg_dashboard?.enabled_state||"-"),1)]),t("tr",null,[n[2]||(n[2]=t("td",null,"WireGuard (wg0)",-1)),t("td",null,[t("span",{class:v(["badge",p(l.value?.services?.wireguard)])},a(l.value?.services?.wireguard?.status||"-"),3)]),t("td",null,a(l.value?.services?.wireguard?.enabled_state||"-"),1)]),t("tr",null,[n[3]||(n[3]=t("td",null,"AdGuard Home",-1)),t("td",null,[t("span",{class:v(["badge",p(l.value?.services?.adguard)])},a(l.value?.services?.adguard?.status||"-"),3)]),t("td",null,a(l.value?.services?.adguard?.enabled_state||"-"),1)])])])):(o(),d("div",D,[n[4]||(n[4]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])]),t("div",H,[t("div",P,[t("div",A,[s(e,{t:"WireGuard"})]),u.value?(o(),d("div",E,[t("div",F,[t("span",null,[s(e,{t:"Total"})]),t("span",M,a(c(l.value?.wireguard?.total_peers)),1)]),t("div",R,[t("span",null,[s(e,{t:"Connected"})]),t("span",W,a(c(l.value?.wireguard?.connected_peers)),1)]),t("table",I,[t("thead",null,[t("tr",null,[t("th",null,[s(e,{t:"Configuration"})]),t("th",null,[s(e,{t:"Total"})]),t("th",null,[s(e,{t:"Connected"})])])]),t("tbody",null,[(o(!0),d(x,null,w(l.value?.wireguard?.configs,r=>(o(),d("tr",{key:r.name},[t("td",V,a(r.name),1),t("td",null,a(c(r.total_peers)),1),t("td",null,a(c(r.connected_peers)),1)]))),128))])])])):(o(),d("div",z,[n[5]||(n[5]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])]),t("div",Q,[t("div",U,[t("div",$,[s(e,{t:"AdGuard Home"})]),t("div",K,[u.value?(o(),d("ul",J,[t("li",O,[t("span",null,[s(e,{t:"DNS Bind"})]),t("span",X,a(l.value?.adguard?.dns_bind_hosts?.join(", ")||"-"),1)]),t("li",Y,[t("span",null,[s(e,{t:"DNS Port"})]),t("span",Z,a(l.value?.adguard?.dns_port||"-"),1)]),t("li",tt,[t("span",null,[s(e,{t:"HTTP Address"})]),t("span",st,a(l.value?.adguard?.http_address||"-"),1)]),t("li",et,[t("span",null,[s(e,{t:"TLS Server Name"})]),t("span",lt,a(l.value?.adguard?.tls_server_name||"-"),1)]),t("li",at,[t("span",null,[s(e,{t:"HTTPS Port"})]),t("span",nt,a(l.value?.adguard?.tls_port_https||"-"),1)])])):(o(),d("div",dt,[n[6]||(n[6]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])]),t("div",ot,[t("div",it,[t("div",ut,[s(e,{t:"AdGuard Query Stats"})]),u.value?(o(),d("div",rt,[t("ul",ct,[t("li",_t,[t("span",null,[s(e,{t:"Window (minutes)"})]),t("span",pt,a(l.value?.adguard_query_stats?.window_minutes),1)]),t("li",ht,[t("span",null,[s(e,{t:"Total Queries"})]),t("span",vt,a(c(l.value?.adguard_query_stats?.total)),1)]),t("li",mt,[t("span",null,[s(e,{t:"Blocked"})]),t("span",gt,a(c(l.value?.adguard_query_stats?.blocked))+" ("+a(l.value?.adguard_query_stats?.blocked_percent)+"%)",1)]),t("li",bt,[t("span",null,[s(e,{t:"Last Entry"})]),t("span",ft,a(l.value?.adguard_query_stats?.last_entry||"-"),1)])]),l.value?.adguard_query_stats&&(l.value.adguard_query_stats.status==="ok"||l.value.adguard_query_stats.status==="empty")&&(l.value.adguard_query_stats.total||0)===0?(o(),d("div",yt,[s(e,{t:"No queries in last window"})])):k("",!0)])):(o(),d("div",xt,[n[7]||(n[7]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])]),t("div",wt,[t("div",kt,[t("div",jt,[s(e,{t:"Certificate"})]),t("div",Lt,[u.value?(o(),d("ul",Bt,[t("li",St,[t("span",null,[s(e,{t:"Path"})]),t("span",Tt,a(l.value?.certificate?.path||"-"),1)]),t("li",qt,[t("span",null,[s(e,{t:"Expires"})]),t("span",Ct,a(l.value?.certificate?.not_after||l.value?.certificate?.status||"-"),1)]),t("li",Gt,[t("span",null,[s(e,{t:"Days Remaining"})]),t("span",Nt,a(l.value?.certificate?.days_remaining??"-"),1)])])):(o(),d("div",Dt,[n[8]||(n[8]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])]),t("div",Ht,[t("div",Pt,[t("div",At,[s(e,{t:"Certificate Renewal"})]),u.value?(o(),d("div",Et,[t("ul",Ft,[t("li",Mt,[t("span",null,[s(e,{t:"Method"})]),t("span",Rt,a(l.value?.certificate_renewal?.method||"-"),1)]),t("li",Wt,[t("span",null,[s(e,{t:"Timer"})]),t("span",It,a(l.value?.certificate_renewal?.timer_unit||"-"),1)]),t("li",Vt,[t("span",null,[s(e,{t:"Next Run"})]),t("span",zt,a(l.value?.certificate_renewal?.next_run||"-"),1)]),t("li",Qt,[t("span",null,[s(e,{t:"Last Run"})]),t("span",Ut,a(l.value?.certificate_renewal?.last_run||"-"),1)])])])):(o(),d("div",$t,[n[9]||(n[9]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])]),t("div",Kt,[t("div",Jt,[t("div",Ot,[s(e,{t:"Disk"})]),t("div",Xt,[u.value?(o(),d("ul",Yt,[t("li",Zt,[t("span",null,[s(e,{t:"Mount"})]),t("span",ts,a(l.value?.disk?.mount||"/"),1)]),t("li",ss,[t("span",null,[s(e,{t:"Used"})]),t("span",es,a(_(l.value?.disk?.used))+" ("+a(l.value?.disk?.percent)+"%)",1)]),t("li",ls,[t("span",null,[s(e,{t:"Free"})]),t("span",as,a(_(l.value?.disk?.free)),1)]),t("li",ns,[t("span",null,[s(e,{t:"Total"})]),t("span",ds,a(_(l.value?.disk?.total)),1)])])):(o(),d("div",os,[n[10]||(n[10]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(e,{t:"Loading"})]))])])])]))}};export{cs as default};
