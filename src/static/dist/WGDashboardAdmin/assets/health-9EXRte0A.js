import{r as m,o as b,z as f,c as d,a as s,b as e,n as h,t as n,g as x,f as o}from"./index-Cdqls877.js";import{L as l}from"./localeText-BxrqCpyK.js";const y={class:"text-body row g-3"},w={class:"col-12"},k={class:"mb-3"},j={class:"col-lg-6"},B={class:"card rounded-3 shadow h-100"},S={class:"card-header bg-transparent"},T={class:"card-body"},D={key:0,class:"table table-sm align-middle mb-0"},L={key:1,class:"text-muted"},G={class:"col-lg-6"},H={class:"card rounded-3 shadow h-100"},N={class:"card-header bg-transparent"},P={class:"card-body"},A={key:0,class:"list-group list-group-flush"},C={class:"list-group-item d-flex justify-content-between"},E={class:"text-muted"},I={class:"list-group-item d-flex justify-content-between"},M={class:"text-muted"},z={class:"list-group-item d-flex justify-content-between"},F={class:"text-muted"},U={class:"list-group-item d-flex justify-content-between"},V={class:"text-muted"},W={class:"list-group-item d-flex justify-content-between"},$={class:"text-muted"},K={key:1,class:"text-muted"},R={class:"col-lg-6"},q={class:"card rounded-3 shadow h-100"},J={class:"card-header bg-transparent"},O={class:"card-body"},Q={key:0,class:"list-group list-group-flush"},X={class:"list-group-item d-flex justify-content-between"},Y={class:"text-muted"},Z={class:"list-group-item d-flex justify-content-between"},ss={class:"text-muted"},ts={class:"list-group-item d-flex justify-content-between"},es={class:"text-muted"},ls={key:1,class:"text-muted"},as={class:"col-lg-6"},ns={class:"card rounded-3 shadow h-100"},ds={class:"card-header bg-transparent"},os={class:"card-body"},is={key:0,class:"list-group list-group-flush"},rs={class:"list-group-item d-flex justify-content-between"},us={class:"text-muted"},cs={class:"list-group-item d-flex justify-content-between"},_s={class:"text-muted"},ps={class:"list-group-item d-flex justify-content-between"},hs={class:"text-muted"},vs={class:"list-group-item d-flex justify-content-between"},gs={class:"text-muted"},ms={key:1,class:"text-muted"},ys={__name:"health",setup(bs){const t=m(null),r=m(!1);let v=null;const g=()=>{x("/api/healthStatus",{},i=>{t.value=i.data,r.value=!0})};b(()=>{g(),v=setInterval(()=>{g()},15e3)}),f(()=>{clearInterval(v)});const u=i=>{if(i==null)return"-";const a=["B","KB","MB","GB","TB"];let _=i,p=0;for(;_>=1024&&p<a.length-1;)_/=1024,p+=1;return`${_.toFixed(2)} ${a[p]}`},c=i=>i?.active?"text-bg-success":"text-bg-danger";return(i,a)=>(o(),d("div",y,[s("div",w,[s("h3",k,[a[0]||(a[0]=s("i",{class:"bi bi-heart-pulse-fill me-2"},null,-1)),e(l,{t:"Health"})])]),s("div",j,[s("div",B,[s("div",S,[e(l,{t:"Services"})]),s("div",T,[r.value?(o(),d("table",D,[s("thead",null,[s("tr",null,[s("th",null,[e(l,{t:"Service"})]),s("th",null,[e(l,{t:"Status"})]),s("th",null,[e(l,{t:"Enabled"})])])]),s("tbody",null,[s("tr",null,[a[1]||(a[1]=s("td",null,"WGDashboard",-1)),s("td",null,[s("span",{class:h(["badge",c(t.value?.services?.wg_dashboard)])},n(t.value?.services?.wg_dashboard?.status||"-"),3)]),s("td",null,n(t.value?.services?.wg_dashboard?.enabled_state||"-"),1)]),s("tr",null,[a[2]||(a[2]=s("td",null,"WireGuard (wg0)",-1)),s("td",null,[s("span",{class:h(["badge",c(t.value?.services?.wireguard)])},n(t.value?.services?.wireguard?.status||"-"),3)]),s("td",null,n(t.value?.services?.wireguard?.enabled_state||"-"),1)]),s("tr",null,[a[3]||(a[3]=s("td",null,"AdGuard Home",-1)),s("td",null,[s("span",{class:h(["badge",c(t.value?.services?.adguard)])},n(t.value?.services?.adguard?.status||"-"),3)]),s("td",null,n(t.value?.services?.adguard?.enabled_state||"-"),1)])])])):(o(),d("div",L,[a[4]||(a[4]=s("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),e(l,{t:"Loading"})]))])])]),s("div",G,[s("div",H,[s("div",N,[e(l,{t:"AdGuard Home"})]),s("div",P,[r.value?(o(),d("ul",A,[s("li",C,[s("span",null,[e(l,{t:"DNS Bind"})]),s("span",E,n(t.value?.adguard?.dns_bind_hosts?.join(", ")||"-"),1)]),s("li",I,[s("span",null,[e(l,{t:"DNS Port"})]),s("span",M,n(t.value?.adguard?.dns_port||"-"),1)]),s("li",z,[s("span",null,[e(l,{t:"HTTP Address"})]),s("span",F,n(t.value?.adguard?.http_address||"-"),1)]),s("li",U,[s("span",null,[e(l,{t:"TLS Server Name"})]),s("span",V,n(t.value?.adguard?.tls_server_name||"-"),1)]),s("li",W,[s("span",null,[e(l,{t:"HTTPS Port"})]),s("span",$,n(t.value?.adguard?.tls_port_https||"-"),1)])])):(o(),d("div",K,[a[5]||(a[5]=s("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),e(l,{t:"Loading"})]))])])]),s("div",R,[s("div",q,[s("div",J,[e(l,{t:"Certificate"})]),s("div",O,[r.value?(o(),d("ul",Q,[s("li",X,[s("span",null,[e(l,{t:"Path"})]),s("span",Y,n(t.value?.certificate?.path||"-"),1)]),s("li",Z,[s("span",null,[e(l,{t:"Expires"})]),s("span",ss,n(t.value?.certificate?.not_after||t.value?.certificate?.status||"-"),1)]),s("li",ts,[s("span",null,[e(l,{t:"Days Remaining"})]),s("span",es,n(t.value?.certificate?.days_remaining??"-"),1)])])):(o(),d("div",ls,[a[6]||(a[6]=s("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),e(l,{t:"Loading"})]))])])]),s("div",as,[s("div",ns,[s("div",ds,[e(l,{t:"Disk"})]),s("div",os,[r.value?(o(),d("ul",is,[s("li",rs,[s("span",null,[e(l,{t:"Mount"})]),s("span",us,n(t.value?.disk?.mount||"/"),1)]),s("li",cs,[s("span",null,[e(l,{t:"Used"})]),s("span",_s,n(u(t.value?.disk?.used))+" ("+n(t.value?.disk?.percent)+"%)",1)]),s("li",ps,[s("span",null,[e(l,{t:"Free"})]),s("span",hs,n(u(t.value?.disk?.free)),1)]),s("li",vs,[s("span",null,[e(l,{t:"Total"})]),s("span",gs,n(u(t.value?.disk?.total)),1)])])):(o(),d("div",ms,[a[7]||(a[7]=s("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),e(l,{t:"Loading"})]))])])])]))}};export{ys as default};
