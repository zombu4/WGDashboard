import{_ as h,c as m,a as t,b as r,j as p,r as c,D as b,g as u,N as v,x as y,h as g,o as x,i as w,f}from"./index-BxUmuwM2.js";import{Q as C}from"./browser-CGtISkog.js";import{L as U}from"./localeText-DE_4BrO4.js";import"./galois-field-I2lBzzs-.js";const I={name:"share",components:{LocaleText:U},async setup(){const n=v(),e=c(!1),i=b(),a=c("dark"),s=c(void 0),l=c(new Blob);await u("/api/getDashboardTheme",{},d=>{a.value=d.data});const o=n.query.ShareID;o===void 0||o.length===0?(s.value=void 0,e.value=!0):await u("/api/sharePeer/get",{ShareID:o},d=>{d.status?(s.value=d.data,l.value=new Blob([s.value.file],{type:"text/plain"})):s.value=void 0,e.value=!0});const _=y(()=>g(a.value));return x(()=>{w()}),{store:i,theme:a,resolvedTheme:_,peerConfiguration:s,blob:l}},mounted(){this.peerConfiguration&&C.toCanvas(document.querySelector("#qrcode"),this.peerConfiguration.file,n=>{n&&console.error(n)})},methods:{download(){const n=new Blob([this.peerConfiguration.file],{type:"text/plain"}),e=URL.createObjectURL(n),i=`${this.peerConfiguration.fileName}.conf`,a=document.createElement("a");a.href=e,a.download=i,a.click()}},computed:{getBlob(){return URL.createObjectURL(this.blob)}}},L=["data-bs-theme"],T={class:"m-auto text-body",style:{width:"500px"}},k={key:0,class:"text-center position-relative",style:{}},B={class:"position-absolute w-100 h-100 top-0 start-0 d-flex animate__animated animate__fadeInUp",style:{"animation-delay":"0.1s"}},R={class:"m-auto"},D={key:1,class:"d-flex align-items-center flex-column gap-3"},S={class:"h1 dashboardLogo text-center animate__animated animate__fadeInUp"},j={id:"qrcode",class:"rounded-3 shadow animate__animated animate__fadeInUp mb-3",ref:"qrcode"},q={class:"text-muted animate__animated animate__fadeInUp mb-1",style:{"animation-delay":"0.2s"}},N=["download","href"];function O(n,e,i,a,s,l){const o=p("LocaleText");return f(),m("div",{class:"container-fluid login-container-fluid d-flex main pt-5 overflow-scroll","data-bs-theme":this.resolvedTheme},[t("div",T,[this.peerConfiguration?(f(),m("div",D,[t("div",S,[e[1]||(e[1]=t("h6",null,"WGDashboard",-1)),r(o,{t:"Scan QR Code with the WireGuard App to add peer"})]),t("canvas",j,null,512),t("p",q,[r(o,{t:"or click the button below to download the "}),e[2]||(e[2]=t("samp",null,".conf",-1)),r(o,{t:" file"})]),t("a",{download:this.peerConfiguration.fileName+".conf",href:l.getBlob,class:"btn btn-lg bg-primary-subtle text-primary-emphasis border-1 border-primary-subtle animate__animated animate__fadeInUp shadow-sm",style:{"animation-delay":"0.25s"}},[...e[3]||(e[3]=[t("i",{class:"bi bi-download"},null,-1)])],8,N)])):(f(),m("div",k,[e[0]||(e[0]=t("div",{class:"animate__animated animate__fadeInUp"},[t("h1",{style:{"font-size":"20rem",filter:"blur(1rem)","animation-duration":"7s"},class:"animate__animated animate__flash animate__infinite"},[t("i",{class:"bi bi-file-binary"})])],-1)),t("div",B,[t("h3",R,[r(o,{t:"Oh no... This link is either expired or invalid."})])])]))])],8,L)}const W=h(I,[["render",O],["__scopeId","data-v-76c42968"]]);export{W as default};
