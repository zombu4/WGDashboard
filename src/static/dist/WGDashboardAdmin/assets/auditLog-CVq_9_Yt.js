import{r as m,o as h,z as b,c as n,a as t,b as s,F as g,k as p,t as l,n as v,g as f,f as o}from"./index-xhOnrGJq.js";import{L as a}from"./localeText-IW_DlSUD.js";const x={class:"text-body"},L={class:"d-flex align-items-center mb-3"},k={class:"mb-0"},y={class:"card rounded-3 shadow"},D={class:"card-body p-0"},I={key:0,class:"table table-sm mb-0"},A={class:"text-muted"},B={class:"text-muted"},M={class:"text-muted"},P={key:1,class:"p-3 text-muted"},N={__name:"auditLog",setup(R){const u=m([]),c=m(!1);let i=null;const r=()=>{f("/api/auditLog",{limit:200},_=>{u.value=_.data||[],c.value=!0})};return h(()=>{r(),i=setInterval(()=>{r()},15e3)}),b(()=>{clearInterval(i)}),(_,d)=>(o(),n("div",x,[t("div",L,[t("h3",k,[d[0]||(d[0]=t("i",{class:"bi bi-clipboard-data me-2"},null,-1)),s(a,{t:"Audit Log"})])]),t("div",y,[t("div",D,[c.value?(o(),n("table",I,[t("thead",null,[t("tr",null,[t("th",null,[s(a,{t:"Date"})]),t("th",null,[s(a,{t:"Actor"})]),t("th",null,[s(a,{t:"IP"})]),t("th",null,[s(a,{t:"Action"})]),t("th",null,[s(a,{t:"Result"})]),t("th",null,[s(a,{t:"Message"})])])]),t("tbody",null,[(o(!0),n(g,null,p(u.value,e=>(o(),n("tr",{key:e.LogID},[t("td",A,l(e.LogDate),1),t("td",null,l(e.Actor),1),t("td",null,l(e.IP),1),t("td",B,l(e.Method)+" "+l(e.Path),1),t("td",null,[t("span",{class:v(["badge",e.Result==="true"?"text-bg-success":"text-bg-danger"])},l(e.Result==="true"?"ok":"fail"),3)]),t("td",M,l(e.Message),1)]))),128))])])):(o(),n("div",P,[d[1]||(d[1]=t("span",{class:"spinner-border spinner-border-sm me-2"},null,-1)),s(a,{t:"Loading"})]))])])]))}};export{N as default};
